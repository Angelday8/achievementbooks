machine:
  java:
    version: openjdk7

dependencies:
  override:
    - ./gradlew dependencies

compile:
  override:
    - ./gradlew assemble

test:
  override:
    - ./gradlew test

deployment:
  release:
    tag: /v[0-9]+(\.[0-9]+)*(-.*)*/
    commands:
      - deploy.sh release $CIRCLE_TAG
  beta:
      branch: beta
      commands:
        - deploy.sh beta $CIRCLE_BRANCH
